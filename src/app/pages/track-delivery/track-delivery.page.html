<!-- <ion-header> </ion-header> -->

<ion-content>
  <ion-spinner
    style="margin-top: 20px;"
    color="primary"
    [class.loadingSpinner]="isLoading"
    [class.stopLoading]="!isLoading"
  ></ion-spinner>
  <div class="overviewDiv" *ngIf="deliveryInfos != null && client != null">
    <ion-button (click)="onGoBack()" fill="clear" class="btReturn">
      <ion-icon
        style="margin-right: 10px;"
        name="arrow-back-outline"
      ></ion-icon>
      Suivi commande
    </ion-button>
    <ion-grid class="overviewGrid">
      <ion-row style="text-align: center; font-size: small; color: #ededed;">
        <ion-col>
          <span>Heure estimée</span>
        </ion-col>
        <ion-col>
          <span>Distance</span>
        </ion-col>
      </ion-row>
      <ion-row style="text-align: center; font-size: 25px;">
        <ion-col>
          <span>{{ deliveryInfos.estimatedDeliveryTime | date:"HH:mm" }}</span>
        </ion-col>
        <ion-col>
          <span>{{ deliveryInfos.distance }}</span>
          <span style="font-size: 12px !important;"> Km</span>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <div class="timeline" *ngIf="deliveryInfos != null && client != null">
    <div class="container right">
      <div class="content">
        <span>Commande passée</span>
        <br />
        <div
          style="
            text-align: end;
            font-style: italic;
            color: grey;
            font-size: 14px;
          "
        >
          <span>{{ deliveryInfos.orderTime | date:"HH:mm" }}</span>
        </div>
      </div>
    </div>
    <div class="container right">
      <div class="content">
        <span>Commande acceptée</span>
        <div class="deliveryManDiv">
          <ion-grid class="noPadding">
            <ion-row>
              <ion-col size="4" class="noPadding" style="text-align: center;">
                <img class="circleImg" src="../../../assets/Moez.jpg" alt="" />
              </ion-col>
              <ion-col size="8" class="ion-align-self-center noPadding">
                <span style="font-size: 12px; color: grey;"
                  >{{ deliveryInfos.deliveryMan.firstName }} a accepté la
                  commande</span
                >
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                <ion-button
                  color="success"
                  class="btCall"
                  size="small"
                  fill="outline"
                >
                  <ion-icon name="call" slot="start"></ion-icon>
                  Contacter
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
          <div
            style="
              text-align: end;
              font-style: italic;
              color: grey;
              font-size: 14px;
            "
          >
            <span
              >{{ deliveryInfos.acceptingDeliveryTime | date:"HH:mm" }}</span
            >
          </div>
        </div>
      </div>
    </div>

    <div class="container right">
      <div class="content">
        <span>Commande livrée</span>
        <br />
        <div class="divAddress">
          <span class="textAddress"
            >{{ client.location.address}}, {{ client.location.city}}</span
          >
        </div>
        <div
          style="
            text-align: end;
            font-style: italic;
            color: grey;
            font-size: 14px;
          "
        >
          <span>{{ deliveryInfos.realDeliveryTime | date:"HH:mm" }}</span>
        </div>
      </div>
    </div>
  </div>
  <ion-button
    color="success"
    class="btTrackMap"
    expand="full"
    *ngIf="deliveryInfos != null && client != null"
  >
    <ion-icon slot="start" name="navigate-outline"></ion-icon>
    Suivre sur la carte</ion-button
  >
</ion-content>
